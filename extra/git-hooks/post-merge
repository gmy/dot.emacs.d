#!/bin/sh

func_get_extension ()
{
    path=$1
    basename=${path##*/}
    filename=${basename%.*}
    extension=${basename##*.}
    echo $extension
}

# for test
# OLD_COMMIT="7d9467107d4bc9a0528b8b42ff8cdc732ee6730d"
NEW_COMMIT=$(git rev-parse HEAD)
echo "[post-merge] $NEW_COMMIT"
for file in `git diff --name-only $OLD_COMMIT $NEW_COMMIT` ; do
    file_extension=`func_get_extension $file`
    if [ $file_extension = "el" ]; then
        echo "rm -rf ${file}c"
        rm -rf ${file}c
    fi
done
