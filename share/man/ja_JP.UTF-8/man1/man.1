.\"
.\" Generated automatically from man.1.in by the
.\" configure script.
.\"
.\" Man page for man (and the former manpath)
.\"
.\" Copyright (c) 1990, 1991, John W. Eaton.
.\"
.\" You may distribute under the terms of the GNU General Public
.\" License as specified in the README file that comes with the man 1.0
.\" distribution.  
.\"
.\" John W. Eaton
.\" jwe@che.utexas.edu
.\" Department of Chemical Engineering
.\" The University of Texas at Austin
.\" Austin, Texas  78712
.\"
.\" Many changes - aeb
.\" More changes - flc
.\"
.\" Japanese Version Copyright (c) 1996 Tanoshima Hidetohsi
.\"         all rights reserved.
.\" Dec 31, 1996   Tanoshima Hidetoshi <tano@sainet.or.jp>
.\"
.\" Modified Thu Jan 29 01:52:36 JST 1998
.\"         by HANATAKA Shinya <hanataka@abyss.rim.or.jp>
.\"
.\" Updated Mon 6 Dec 1999 by NAKANO Takeo <nakano@apm.seikei.ac.jp>
.\"
.\" Updated Tue Nov 14 22:52:03 JST 2000
.\"         by Yuichi SATO <sato@complex.eng.hokudai.ac.jp>
.\" Updated Tue Dec 18 10:09:17 JST 2001
.\"         by Yuichi SATO <ysato@h4.dion.ne.jp>
.\"
.\" Updated Tue Apr 12 08:43:51 JST 2011
.\"         by TACHIBANA Akira <tati@kc5.so-net.ne.jp>
.\"
.TH man 1 "September 19, 2005"
.LO 1
.SH 名前
man \- オンラインマニュアルページを整形し表示する
.SH 書式
.B man 
.RB [ \-acdfFhkKtwW ]
.RB [ --path ] 
.RB [ \-m 
.IR system ] 
.RB [ \-p 
.IR string ] 
.RB [ \-C 
.IR config_file ] 
.RB [ \-M 
.IR pathlist ]
.RB [ \-P
.IR pager ] 
.RB [ \-B
.IR browser ] 
.RB [ \-H
.IR htmlpager ] 
.RB [ \-S 
.IR section_list ] 
.RI [ section ] 
.I "name ..."

.SH 説明
.B man
はオンラインマニュアルページ (man ページ) を整形し表示する。
.I section
を指定すると、
.B man
はそのセクションのみからマニュアルを探す。
通常、
.I name
は man ページの名前で、
典型的なものとしてはコマンド名・関数名・ファイル名などがある。
ただし、
.I name
にスラッシュ
.RB ( / )
が含まれていると、
.B man
はファイルの指定であると解釈する。
したがって
.B "man ./foo.5"
と指定したり、
.B "man /cd/foo/bar.1.gz\fR\fP"
と指定することも可能である。
.PP
.B man
が man ページファイルを検索するディレクトリについての説明は、
以下を参照すること。
 
.SH マニュアルセクション
マニュアルの標準的なセクションは以下のとおり：
.TP
.B 1
ユーザーコマンド
.TP
.B 2
システムコール
.TP
.B 3
C ライブラリ関数
.TP
.B 4
スペシャルファイル
.TP
.B 5
ファイルフォーマット
.TP
.B 6
ゲームプログラム
.TP
.B 7
概要、慣習やその他
.TP
.B 8
管理コマンドと特権コマンド
.TP
ディストリビューションによりマニュアルセクションは変更され、追加のセクションが設けられることがある。


.SH オプション
.TP
.B \-\^C " config_file"
使用する設定ファイルを指定する。デフォルトは
.B /usr/share/misc/man.conf
である
.RB ( man.conf (5)
を参照すること)。
.TP
.B \-\^M " path"
man ページを探すディレクトリのリストを指定する。
ディレクトリをコロンで区切って指定する。
リストが空の場合は、
.B \-M
オプションを指定しないのと同じである。
.RB 「 "MAN ページの検索パス" 」
を参照すること。
.TP
.B \-\^P " pager"
使用するページャーを指定する。
このオプションは環境変数
.B MANPAGER
より優先される。さらにこの環境変数は
環境変数
.B PAGER
よりも優先される。デフォルトでは
.B man
は
.B "/usr/bin/less -is"
を用いる。
.TP
.B \-\^B
HTML ファイルで使用するブラウザを指定する。
このオプションは環境変数
.B BROWSER
より優先される。デフォルトでは
.B man
は 
.B "/usr/bin/less -is"
を用いる。
.TP
.B \-\^H
HTML ファイルをテキストに変換するコマンドを指定する。
このオプションは環境変数
.B HTMLPAGER
より優先される。デフォルトでは
.B man
は 
.B "/bin/cat"
を用いる。
.TP
.B \-\^S " section_list"
.I section_list
はマニュアルを探すセクションを指定するコロン区切りのリストである。
このオプションは環境変数
.B MANSECT
より優先される。
.TP
.B \-\^a
デフォルトでは、
.B man
はみつかった最初の man ページを表示したあと終了する。このオプションを使うと、
.B man
は最初にみつかったものだけでなく
.B name
にマッチしたすべてのページを表示する。
.TP
.B \-\^c
最新の cat 形式のページがあっても man ページのソースを
整形しなおす。このオプションは cat ページが現在使用している端末と違った幅で
整形されているときや壊れている場合などに有用である。
.TP
.B \-\^d
man ページを表示せず、大量のデバッグ情報を出力する。
.TP
.B \-\^D
デバッグ情報と man ページの両方を表示する。
.TP
.B \-\^f
.B whatis
コマンドと同じ。
.TP
.BR \-\^F " または " \-\-preformat
整形のみ行い、表示はしない。
.TP
.B \-\^h
ヘルプメッセージを表示して終了する。
.TP
.B \-\^k
.B apropos
コマンドと同じ。
.TP
.B \-\^K
「全ての」man ページから指定した文字列を探す。警告: たいていの場合これは
非常に遅いので セクションを指定した方が良い。
(だいたいの目安として、私のマシンでは
500 ページを検索するのに 1 分かかる。)
.TP
.B \-\^m " system"
(現在のシステムから、別のシステムのマニュアルにアクセスできる環境で)
別のシステムの man ページ群を検索するよう、そのシステム名を指定する。

.TP
.B \-\^p " string"
.B nroff
や
.B troff
の前に実行するプリプロセッサの順番を指定する。
インストールの状態によってはフルセットの
プリプロセッサが用意されてないかもしれない。いくつ
かのプリプロセッサとそれを指し示す文字は次のとおり：
eqn (e), grap (g), pic (p), tbl (t), vgrind (v), refer (r)。
(訳注: 順番の指定方法は、例えば
.B \-\^p "egpt"
である。)
このオプションは環境変数
.B MANROFFSEQ
より優先される。
.TP
.B \-\^t
man ページの整形に
.B /usr/bin/groff \-Tps \-mandoc
を使い、
.B stdout
に出力する。
.B /usr/bin/groff \-Tps \-mandoc
のデフォルトの出力フォーマットは PostScript である。
別の出力フォーマットを選ぶならば、
.BR groff (1)
のマニュアルページにある利用可能なデバイスを参照すること。

選ばれた出力フォーマットと印刷装置の能力に応じて、
出力は印刷する前になんらかのフィルターを通す必要があるかもしれない。
.TP
.B \-\^w \fRまたは\fP \-\-path
man ページを表示せず、
整形ないし表示されるファイルの位置を表示する。
引数を与えないと
.B man
が man ページを検索するディレクトリのリストを標準出力に表示する。
.B manpath
コマンドが
.B man
にリンクされているときは "manpath" は "man --path" と
同じになる。
.TP
.B \-\^W
\-\^w に似ているが、ファイル名を追加情報なしに 1 行に 1 つづつ表示する。
これはシェルから
.ft CW
.B "man -aW man | xargs ls -l"
.ft
などと使うと便利である。

.SH "CAT ページ"
.B man
コマンドはすでに整形された man ページを、
次にそのページが必要になったときの整形時間の節約のために保存しようとする。
伝統的に、DIR/manX の整形済みマニュアルは DIR/catX に
セーブされるが、
man ディレクトリと cat ディレクトリの別のマッピング (対応付け) を
.B /usr/share/misc/man.conf
で指定することもできる。
指定された cat ディレクトリが存在しない場合、
cat ページはセーブされない。
整形された cat ページの 1 行の文字数が 80 文字でない場合、
cat ページはセーブされない。
man.conf に NOCACHE と書かれている場合、
cat ページはセーブされない。
.PP
.B man
コマンドをユーザー man に suid することもできる。
その場合、 cat ディレクトリを所有者 man、モードは 0755
(ユーザー man だけが書き込み可) とし、
cat ファイルを所有者 man、モードは 0644 または 0444
(ユーザー man だけが書き込み可、またはユーザーすべてが書き込み不可)
としておけば、一般ユーザーは
.B man
コマンドを使わずに cat ページを変更したり、
他の関係ないファイルを cat ディレクトリに置いたりすることができなくなる。
.B man
コマンドが suid されていない場合に、
すべてのユーザーが cat ページを cat ディレクトリに置けるようにするには、
cat ディレクトリのモードを 0777 にする必要がある。
.PP
cat ページがあったとしても、オプション
.B \-c
をつけると強制的に man ページを再整形する。

.SH "HTML ページ"
.B man
コマンドは 'html' の後ろに 'セクション番号' が続く名前のディレクトリ中に
HTML 版の man ページがあれば、それをみつけ出す。
ファイル名の末尾に付く拡張子は、".html" でなければならない。
したがって、
.BR ls (1)
の man ページの HTML 版があれば、その有効な名前は、
.\":tati:↓のパスは間違い
.\":tati:.I /usr/share/man/htmlman1/ls.1.html
.I /usr/share/man/html1/ls.1.html
といったものになるだろう。

.SH "MAN ページの検索パス"
.B man
はマニュアルページをみつけるために洗練された方法を用いる。
すなわち、起動オプションや環境変数、設定ファイル
.B /usr/share/misc/man.conf 
、さらにプログラムに組み込まれている伝統的／発見的な検索法を合わせて
使用するのである。
.PP
まず最初に、
.B man
の引き数
.I name
にスラッシュ
.RB ( / )
がある場合は、
.B man
はファイルの指定であると解釈して、検索を行わない。
.PP
しかし
.I name
にスラッシュが含まれていない通常の場合、
.B man
は指定されたトピックについて、マニュアルページになりそうなファイルを
いろいろなディレクトリで検索する。
.PP
.BI "-M " pathlist
オプションを指定すると、
.I pathlist
が
.B man
が検索を行う対象となる。
.I pathlist
はコロンで区切ったディレクトリのリストである。
.PP
.B -M
オプションを指定していないが、環境変数
.B MANPATH
は設定してある場合は、この環境変数の値が
.B man
が検索を行うディレクトリのリストである。
.PP
.B -M
や
.B MANPATH
でパスのリストを明示的に指定していない場合、
.B man
は設定ファイル
.B /usr/share/misc/man.conf
の内容に基づいてパスのリストを作成する。
設定ファイルの
.B MANPATH
ステートメントにより、特定のディレクトリを検索パスに追加するのだ。
.PP
さらに
.B MANPATH_MAP
ステートメントによって、コマンド検索パス
(すなわち、ユーザーの
.B PATH
環境変数) に応じた検索パスが追加される。
コマンド検索パスにある各ディレクトリに対して、
.B MANPATH_MAP
ステートメントが man ページファイルの検索パスに追加すべき
ディレクトリを一つづつ指定する。
.B man
は
.B PATH
変数を調べて、
.B MANPATH_MAP
で指定されている対応するディレクトリを man ページファイルの検索パスに
追加するのである。
したがって、
.B MANPATH_MAP
を適切に使用している場合には、
.B "man xyz"
を実行すると、コマンド
.B xyz
を実行したときに動作するプログラムの man ページが表示されることになる。
.PP
なお、コマンド検索パスのディレクトリ
(「コマンドディレクトリ」と呼ぶことにする) に対して
.B MANPATH_MAP
ステートメントが\fI存在しない\fR場合、
.B man
はそうしたコマンドディレクトリの一つ一つに対して、
マニュアルページがあるディレクトリを自動的に「近隣の場所」で
検索する。
「近隣の場所」とは、コマンドディレクトリ自身のサブディレクトリや、
コマンドディレクトリの親ディレクトリのサブディレクトリ
といった場所である。
.PP
「近隣の場所」の自動検索を無効にするには、
.B NOAUTOPATH
ステートメントを
.B /usr/share/misc/man.conf
に指定すればよい。
.PP
上記の検索パスにある各ディレクトリにおいて、
.B man
は
.IB topic . section
という名前のファイルを探す。
このセクション番号には (1x の x のような)
接尾辞があってもよいし、圧縮ファイルであることを示す拡張子が
さらに続いてもよい。
このようなファイルがみつからない場合、
.B man
は
.BI man N
または
.BI cat N
という名前の全てのサブディレクトリを検索する。
ここで
.I N
は man ページのセクション番号である。
ファイルが
.BI cat N
サブディレクトリにある場合、
.B man
はそれを整形済みの man ページファイル (cat ページ) であるとみなす。
それ以外の場合は、未整形の man ページであるとみなすわけだ。
どちらの場合でも、ファイル名に
.RB ( .gz
のような) 既知の圧縮ファイル拡張子が付いていれば、
.B man
は gzip されたファイルであると考える。
.PP
.B man
が特定のトピックの man ページを
どこでみつけるか (またはみつけることができるのか) を知りたいときは、
.BR "--path " ( -w )
オプションを使うこと。

.SH 環境変数
.TP
.B MANPATH
.B MANPATH
を設定すると、
man ページファイルを探すときのパスとして使われる。
この環境変数は設定ファイルや自動的に指定される検索パスの設定を上書きするが、
起動オプション
.B -M
で上書きされる。
.RB 「 "MAN ページの検索パス" 」
を参照すること。
.TP
.B MANPL
.B MANPL
を設定すると、表示する 1 ページ当たりの行数として使われる。
この環境変数を設定しない場合、man ページ全体で (長い) 1 ページになる。
.TP
.B MANROFFSEQ
.B MANROFFSEQ
を設定すると、
.B nroff
や
.B troff
の前に実行するプリプロセッサが、この値をもとにして決定される。
(訳注: 設定方法は、例えば 
\&'MANROFFSEQ=egpt'
である。)
デフォルトでは、man ページは
.B nroff
の前に tbl 用のプリプロセッサに通される。
.TP
.B MANSECT
.B MANSECT
を設定すると、どのマニュアルセクションを探すかが
この値をもとにして決定される。
.TP
.B MANWIDTH
.B MANWIDTH
を設定すると、その値を表示する man ページの幅として使用する。
指定しなかった場合には画面の幅一杯まで使用する。
.TP
.B MANPAGER
.B MANPAGER
を設定すると、その値を man ページを表示するプログラムとして使用する。
指定しなかった場合には、
環境変数
.B PAGER
が使用される。どちらも設定されていない場合には
.B /usr/bin/less -is
が使われる。
.TP
.B BROWSER
HTML 版の man ページの表示に用いるブラウザ名。
設定されていない場合には
.B /usr/bin/less -is
が使われる。
.TP
.B HTMLPAGER
HTML ファイルをテキストに変換するコマンド。
設定されていない場合には
.B /bin/cat
が使われる。
.TP
.B LANG
.B LANG
を設定すると、
.B man
コマンドはまずその名前のサブディレクトリから man ページを探す。
したがってコマンドラインから 'LANG=dk man 1 foo'
と打ち込むと、
.B man
コマンドはまず .../dk/man1/foo.1 を探し、
みつからなければ .../man1/foo.1
を探す。この ... は検索パスのディレクトリである。
.TP
.B "NLSPATH, LC_MESSAGES, LANG"
環境変数
.B NLSPATH
と
.B LC_MESSAGES
(後者が指定されていなければ
.BR LANG )
はメッセージカタログの位置を指定する
(英語のメッセージはコンパイル時に組み込まれているので、
英語のカタログは必要ない)。
man に呼び出される
.BR col (1)
のようなプログラムは、LC_CTYPE
といった変数も使うことに注意すること。
.TP
.B PATH
.B PATH
は man ページのデフォルト検索パスの決定に利用される。
.RB 「 "MAN ページの検索パス" 」
を参照すること。
.TP
.B SYSTEM
.B SYSTEM
は
(現在のシステムから、別のシステムのマニュアルにアクセス
できる環境で) デフォルトの別のシステム名を得るのに使われる。
(この環境変数は
.B \-m
オプションと一緒に使うためにある。
.B \-m
オプションの引数に空文字列 "" を指定すると、デフォルトの
別のシステム名を指定したことになる。
)
.SH バグ
.B \-t
オプションは troff やそれと同等なプログラムがインストールされている
場合のみ有効である。
.br
もしハイフンのかわりに、点滅する \e255 や <AD> が表示された場合には
環境変数に 'LESSCHARSET=latin1' を設定すると良い。
.PP
訳注: 日本語を使用する場合にはこの方法では対応できない。
groff のオプションで
\-Tnippon 、 \-Tutf8 または \-Tascii を使用すること。
.SH ウラ技
  (global-set-key [(f1)] (lambda () (interactive) (manual-entry (current-word))))

という行を自分の
.IR .emacs
ファイルに追加しておけば、F1 を叩くと、
現在のカーソル位置にあるライブラリコールの
man ページが表示される。
.LP
バックスペースとアンダースコアがない
プレーンテキスト版の man ページを得るには、コマンド

  # man foo | col -b > foo.mantxt

を実行すること。
.SH 作者
.B "man"
パッケージの原作者は John W. Eaton である。
Zeyd M. Ben-Halim が man 1.2 をリリースし、引き続いて Andries Brouwer が
versions 1.3 から 1.5p までをリリースした。
現在のメンテナーは Federico Lucifredi <flucifredi@acm.org> である。

.SH 関連項目
apropos(1), whatis(1), less(1), groff(1), man.conf(5).

.SH 訳注
本 man ページの各ファイルのパスは、man-1.6g で
.IP
configure +fhs
.PP
することによって得られたものです。
実際のパスはディストリビューションなどによって
異なっている可能性があります。
